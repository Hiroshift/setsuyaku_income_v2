<% if user_signed_in? %>

  <!-- 節約を記録（1秒で終わる） -->
  <div class="record-section">
    <p class="record-title">節約を記録する</p>
    <%= form_with url: new_income_path, method: :post, local: true do |f| %>
      <div class="record-input-wrap">
        <span class="record-yen">¥</span>
        <%= f.number_field :amount, placeholder: "0", class: "record-input", required: true, min: 1, inputmode: "numeric", autocomplete: "off" %>
      </div>
      <%= f.submit "記録する", class: "record-btn" %>
    <% end %>
  </div>

  <!-- ダッシュボード -->
  <div class="stats">
    <div class="stat-card stat-card--today">
      <span class="stat-label">TODAY</span>
      <span class="stat-value">¥<%= number_with_delimiter(@today_income) %></span>
    </div>

    <div class="stat-card stat-card--time">
      <span class="stat-label">TIME SAVED</span>
      <span class="stat-value"><%= @virtual_work_time %>h</span>
    </div>

    <div class="stat-card stat-card--total">
      <span class="stat-label">TOTAL</span>
      <span class="stat-value">¥<%= number_with_delimiter(@total_income) %></span>
    </div>
  </div>

<% else %>

  <!-- 未ログイン：ヒーロー -->
  <div class="hero">
    <h2 class="hero-headline">
      節約は、<span class="hero-gold">収入</span>だ。
    </h2>
    <p class="hero-sub">
      節約した金額を「収入」と「取り戻した時間」に変換。<br>
      毎日の小さな節約が、どれだけの価値か実感できます。
    </p>

    <div class="hero-features">
      <div class="hero-feature">
        <div class="hero-feature-dot hero-feature-dot--gold">¥</div>
        <span class="hero-feature-text">節約金額をサッと記録</span>
      </div>
      <div class="hero-feature">
        <div class="hero-feature-dot hero-feature-dot--blue">⏱</div>
        <span class="hero-feature-text">時給ベースで時間に換算</span>
      </div>
      <div class="hero-feature">
        <div class="hero-feature-dot hero-feature-dot--purple">∑</div>
        <span class="hero-feature-text">累計の節約収入を可視化</span>
      </div>
    </div>

    <%= link_to "無料ではじめる", new_user_registration_path, class: "hero-cta" %>
  </div>

<% end %>
